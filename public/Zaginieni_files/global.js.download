function slider_opisy_srodkuj(){
  if($('.wr.slider').length > 0){
    $('.slide_info').each(function(){
      var height = $(this).height();
      var wrap_height = $(this).parents('.slide').height();
      var margin = (wrap_height - height) / 2;
      $(this).css('margin-top', margin);
      //console.log('Wrap: '+wrap_height+'. inner: '+height);
    });
  }
}

  //SEARCH FORM VALIDATION
  $(document).on('submit','div.search_bar form',function(){
    var wymagane = 1;
    $(this).find('input').each(function(){
      if(($(this).val() == '') || ($(this).val() == ' ')) {
        wymagane = 0;
      }
    });
    if( wymagane == 0 ) { return false; }
  });
  //SEARCH MOBILE BTN
  $(document).on('click','.social_search',function(e){
    e.preventDefault();
    if($(this).hasClass('active')){
      $(this).removeClass('active');
      $('.search_bar').fadeOut(300);
    } else {
      $(this).addClass('active');
      $('.search_bar').fadeIn(300);
    }
  });
  //SEARCH SUPPORT BTN
  $(document).on('click','.btn_support_mobile',function(e){
    e.preventDefault();

    if($(this).hasClass('active')){
      $(this).removeClass('active');
      $('.support_mobile_wrap').slideUp(300);
    } else {
      //ZAMKNIECIE MENU
      if($('.btn_menu_mobile').hasClass('active')){
        $('.btn_menu_mobile').removeClass('active');
        $('.menu_rwd').slideUp(300);
      }

      $(this).addClass('active');
      $('.support_mobile_wrap').slideDown(300);
    }
  });

function getUrlParameter(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++)
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam)
        {
            return sParameterName[1];
        }
        return false;
    }
}

$(document).ready(function(){
    console.log($('input[name=temat]').length);
    if ($('input[name=temat]').length && getUrlParameter('spr').length) {
        $('input[name=temat]').val("Dotyczy sprawy nr "+getUrlParameter('spr'));
    }

  slider_opisy_srodkuj();

	$('.search_result_pagination a').click(function(e){
		e.preventDefault();
		$('#paginator').attr('action',$(this).attr('href')).submit();
	});
	$('.search_result_top_links a').click(function(e){
		e.preventDefault();
		$('#changeQuery').submit();
	});
	$('.select_wrap select').change(function(e){
		e.preventDefault();
	});

	$( "#orderSelect" ).selectmenu({
		change: function( event, ui ) {
			$('#order').val(ui.item.value)
			$('#sorter').submit();
		}
	});

  // side menu magic
  $('.sidebar_menu .current_page_item').show().parent().show().parent().show().parent().show().parent().show().parent().show().parent().show().parent().show();
  $('.sidebar_menu .current_page_item').children('ul').show();

  //COLORBOX
  $('a.gal').colorbox({
    rel: 'gal',
  });

  $('.partners_slick').slick({
    infinite: true,
    slidesToShow: 5,
    slidesToScroll: 5,
    autoplay: true,
    arrows: false,
    dots: false,
    speed: 1000,
    autoplaySpeed: 2000,
    pauseOnHover: true,
    swipe: true,
    swipeToSlide: true,
    responsive: [
    {
      breakpoint: 1024,
      settings: {
        slidesToShow: 5,
        slidesToScroll: 5,
      }
    },
    {
      breakpoint: 800,
      settings: {
        slidesToShow: 4,
        slidesToScroll: 4,
      }
    },
    {
      breakpoint: 640,
      settings: {
        slidesToShow: 3,
        slidesToScroll: 3
      }
    },
    {
      breakpoint: 480,
      settings: {
        slidesToShow: 2,
        slidesToScroll: 2,
      }
    }]
  });


  $('.cytaty_slick').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    autoplay: true,
    arrows: true,
    dots: false,
    fade: true,
    speed: 1000,
    autoplaySpeed: 4000,
    pauseOnHover: true,
    swipe: true,
    //swipeToSlide: true,
  });


  //SLICK SLIDER
  $('.slick').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    autoplay: true,
    autoplaySpeed: 5000,
    arrows: false,
    dots: true,
    //fade: true,
    speed: 400,
    swipe: true,
    onBeforeChange: function(event){
      //cos
    },
    onAfterChange: function(event){
      //cos
    },
    onInit: function(event){
      //cos
    },
    customPaging: function(slider, i) {
      return '<span></span>';
    },
  });
  //SLICK - OBSLUGA KLAWIATURY
  $(document).keydown(function(e){
    if (e.keyCode == 37) {
      //alert( "left pressed" );
      $(document).find('.slick').slickPrev();
      return false;
    }
    if (e.keyCode == 39) {
      //alert( "right pressed" );
      $(document).find('.slick').slickNext();
      return false;
    }
  });

  $('.slick_avatar').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    autoplay: false,
    arrows: false,
    dots: true,
    //fade: true,
    speed: 400,
    swipe: true,
    onBeforeChange: function(event){
      //cos
    },
    onAfterChange: function(event){
      //cos
    },
    onInit: function(event){
      //cos
    },
    customPaging: function(slider, i) {
      return '<span></span>';
    },
  });


  $('.slick_prev').on('click',function() {
    $(this).parents('#slider').find('.slick').slickPrev();
  });
  $('.slick_next').on('click',function() {
    $(this).parents('#slider').find('.slick').slickNext();
  });
  $('.slick_play').on('click',function() {
    $(this).parents('#slider').find('.slick').slickPlay();
    $(this).fadeOut(100,function(){
      $(this).parents('#slider').find('.slick_stop').fadeIn(100);
    });
  });
  $('.slick_stop').on('click',function() {
    $(this).parents('#slider').find('.slick').slickPause();
    $(this).fadeOut(100,function(){
      $(this).parents('.toolbar').find('.slick_play').fadeIn(100);
    });
  });

  //NICE SCROLL
  $('.scroll').niceScroll({
    cursorcolor: '#ababab',
    cursorwidth: 4,
    cursorborder: '1px solid #ababab',
    cursorborderradius: '4px',
    cursoropacitymax: 0.3,
    cursoropacitymax: 0.6,
    grabcursorenabled: true,
    autohidemode: false,
    railpadding: {top:0,right:0,left:0,bottom:0},
    hwacceleration: true,
    //touchbehavior: true,
    //bouncescroll: true,
    //boxzoom: true,
  });
  $('.grab').niceScroll({
    cursorcolor: '#ababab',
    cursorwidth: 4,
    cursorborder: '1px solid #ababab',
    cursorborderradius: '4px',
    cursoropacitymax: 0.3,
    cursoropacitymax: 0.6,
    grabcursorenabled: true,
    autohidemode: false,
    railpadding: {top:0,right:0,left:0,bottom:0},
    hwacceleration: true,
    touchbehavior: true,
    //bouncescroll: true,
    //boxzoom: true,
  });

  //FUNKCJA WYWOLUJACA ODSWIEZENIE SCROLLI
  function refresh_scrolls(event) {
    $('.grab').getNiceScroll().resize();
    $('.scroll').getNiceScroll().resize();
  }

  $(window).resize(function(){
    //WYWOLANIE ODSWIEZENIA SCROLLI
    refresh_scrolls();
    $('select#lang_choice').selectmenu('refresh');
    $('select.form_select').selectmenu('refresh');
    slider_opisy_srodkuj();
  });

  $(window).load(function(){
    $('.slick .slide').css('display','block');
    slider_opisy_srodkuj();
  });

  //CARDS NAV
  // $('.content_cards a').on('click',function(event) {
  //   event.preventDefault();
  //   var page = $(this).attr('data-page');

  //   if( ($(this).hasClass('active')) && ($('.content_cards_pages .page[data-page="'+page+'"]').hasClass('active')) ){
  //     //notin ma men
  //   } else {
  //     $('.content_cards a').removeClass('active');
  //     $('.content_cards a[data-page="'+page+'"]').addClass('active');

  //     $('.content_cards_pages .page.active').fadeOut(100,function(){
  //       $(this).removeClass('active');
  //       $('.content_cards_pages .page[data-page="'+page+'"]').fadeIn(100,function(){ $(this).addClass('active'); });
  //       $('select.form_select').selectmenu('refresh');
  //     });
  //   }
  // });

  //MENU MOBILE
  $(document).on('click', '.btn_menu_mobile', function(event) {
    event.preventDefault();

    if(! $(this).hasClass('active')) {
      //ZAMKNIECIE MOBILE SUPPORTU
      if($('.btn_support_mobile').hasClass('active')){
        $('.btn_support_mobile').removeClass('active');
        $('.support_mobile_wrap').slideUp(300);
      }

      $(this).addClass('active');
      $('.menu_rwd').slideDown(200);
    } else {
      $(this).removeClass('active');
      $('.menu_rwd').slideUp(200);
    }
  });

  $('select#lang_choice').selectmenu().selectmenu("menuWidget").addClass("lang");
  $('select.form_select').selectmenu().selectmenu("menuWidget").addClass("select");

  // ICONS STUFF
  $('.sidebar_menu>ul>li').append('<div class="img"></div>');


  // go to TOP action
  $('.go_up').click(function() {
    $('html,body').animate({ scrollTop: 0 }, 'slow');
    return false;
  });
  $( window ).scroll(function() {
    if ( $(window).scrollTop() > 120 ) {
      $('.go_up').fadeIn();
    } else {
      $('.go_up').fadeOut();
    }
    //FLOAT TEGES
    if ( $(window).scrollTop() > 630 ) {
      //$('.float_teges').addClass('docked');
      $('.float_teges').css('top', $(window).scrollTop()+10);
    } else {
      //$('.float_teges').removeClass('docked');
      $('.float_teges').css('top', '630px');
    }
  });

  //DOWOLNA KWOTA ARROW
  $(document).on('click', '.dowolna_kwota input.txt', function(event) {
    $('.dowolna_kwota').removeClass('marked');
  });

  //CONTACT FLOAT
  $(document).on('click', '.contact_float_trigger, .btn_mobile_contact_float', function(event) {
    event.preventDefault();
    if(! $('.contact_float_wrap').hasClass('active')) {
      $('.contact_float_wrap').addClass('active');
      $('.float_teges').addClass('active');

    } else {
      $('.contact_float_wrap').removeClass('active');
      $('.float_teges').removeClass('active');
    }
  });

  //CEGIELKI FLOAT
  $(document).on('click', '.quick_support_wrap .btn_price', function(event) {
    event.preventDefault();
    if(! $(this).parents('.quick_support_wrap').hasClass('active')) {
      $(this).parents('.quick_support_wrap').addClass('active');
      $('.float_teges').addClass('active');
    } else {
      $(this).parents('.quick_support_wrap').removeClass('active');
      $('.float_teges').removeClass('active');
    }
  });


  //ALERT
  $(document).on('click', '.alert_wrap .alert_close', function(event) {
    $('.alert_wrap').fadeOut(300,function(){
      $('.alert_wrap').remove();
    });
  });

  //POPUP TWOJA POMOC
  $(document).on('click', '.popup_twoja_pomoc .close', function(event) {
    $('.popup_twoja_pomoc_overlay').fadeOut(300,function(){
      $('.popup_twoja_pomoc_overlay').remove();
    });
  });


});